<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kasey Game Records</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Impact&display=swap" rel="stylesheet"> <!-- External Fonts -->
    <link rel="stylesheet" href="styles.css"> <!-- Link to external CSS file -->
</head>
<body>
    <!-- "Next" Button that redirects to a new page -->
            <a href="https://zu38.github.io/id" class="next-button">
                <button type="button">Game Link</button>
            </a>
    
    <div class="form-wrapper">
        <div class="form-container" id="form-container">
            <h1>Kasey Game Records</h1>
            
            <form action="https://script.google.com/macros/s/AKfycbwmzb28qBPMOLBJ0wpxR8LpqzEnSmAZQma055PP1O6WAzWsIEGNzY19Xp26hAv6ggcg/exec" method="POST">
                <label for="player_name">Player's Name:</label>
                <input type="text" id="player_name" name="player_name" required>

                <label for="cashtag">Player's Cashtag:</label>
                <input type="text" id="cashtag" name="cashtag" required>

                <label for="game">Game:</label>
                <select id="game" name="game" required>
                    <option value="juwa">Juwa</option>
                    <option value="gamevault">Gamevault</option>
                    <option value="firekirin">Firekirin</option>
                    <option value="pandamaster">Pandamaster</option>
                    <option value="orionstar">Orionstar</option>
                    <option value="gameroom">Gameroom</option>
                    <option value="vblink">Vblink</option>
                    <option value="vegasweep">Vegasweep</option>
                    <option value="riversweep">Riversweep</option>
                    <option value="yolo">Yolo</option>
                    <option value="milkyway">Milkyway</option>
                </select>

                <label for="cashin">Cashin:</label>
                <input type="number" id="cashin" name="cashin" required>

                <label for="cashout">Cashout:</label>
                <input type="number" id="cashout" name="cashout" required>

                <label for="employee">Employee:</label>
                <select id="employee" name="employee" required>
                    <option value="mr_ethical">Mr Ethical</option>
                    <option value="issagi">Issagi</option>
                    <option value="clean_sea">Clean Sea</option>
                </select>

                <label for="date">Date:</label>
                <input type="date" id="date" name="date" required>

                <label for="time">Time:</label>
                <input type="time" id="time" name="time" required>

                <label for="remarks">Remarks:</label>
                <textarea id="remarks" name="remarks" class="remarks-field"></textarea>

                <input type="submit" value="Submit">
            </form>
             
        </div>
    </div>

    <script>
        window.onload = function () {
            const today = new Date();

            // Format date as YYYY-MM-DD
            const formattedDate = today.toISOString().split('T')[0];
            document.getElementById("date").value = formattedDate;

            // Format time as HH:MM (24-hour format)
            const hours = String(today.getHours()).padStart(2, '0');
            const minutes = String(today.getMinutes()).padStart(2, '0');
            document.getElementById("time").value = `${hours}:${minutes}`;

            const formContainer = document.getElementById("form-container");
            formContainer.classList.add("show");
        }

        // Prevent double submission and multiple data entries
        document.addEventListener("DOMContentLoaded", function () {
            const form = document.querySelector("form");
            const submitButton = form.querySelector('input[type="submit"]');
            
            // Track form submission
            let isFormSubmitted = false;

            // Prevent submit using form submission
            form.addEventListener("submit", function (event) {
                if (isFormSubmitted) {
                    event.preventDefault();  // Prevent further submissions if already submitted
                    return; // Stop further action
                }

                isFormSubmitted = true; // Flag that the form has been submitted
                submitButton.disabled = true; // Disable the submit button
                submitButton.value = "Submitting..."; // Change button text
            });

            // Add touch event for mobile users
            submitButton.addEventListener("touchstart", function (event) {
                if (isFormSubmitted) {
                    event.preventDefault(); // Prevent submission if the form is already submitted
                }
            });

            // Also listen for click event to handle mobile and desktop scenarios
            submitButton.addEventListener("click", function (event) {
                if (isFormSubmitted) {
                    event.preventDefault();  // Prevent click if already submitted
                }
            });
        });
    </script>
</body>
</html>
